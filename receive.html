<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=edge"> <!-- Avoid IE compatibility mode, as it breaks layout -->
    <link rel="icon" href="favicon.ico">

    <title>Caller: Receive</title>

    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css"> 
  </head>

  <body>
    <div class="w3-card " style="max-width:600px;margin-left: auto;margin-right: auto ">
      <div class="w3-container ">
        Receiving phone numbers from <a id="link"></a>
      </div>
      <ul id="phonenumbers" class="w3-ul w3-border-top">
        
      </ul>
    </div>
    
    
    <script src="/socket.io/socket.io.js"></script>
    <script src="https://code.jquery.com/jquery-1.11.1.js"></script>
    <script>
      $(function () {
        var socket = io.connect();
        var room=window.location.pathname.split('receive/').pop();
        var receivelink=window.location.protocol + "//" + window.location.hostname + (window.location.port ? ":" : null) + window.location.port + "/send/" + room;
        $('#link').attr("href", receivelink);
        $('#link').text(receivelink);
        
        socket.on('connect', function() {
          socket.emit('room', room);
        });
        
        socket.on('phonenumber', function(msg){
          $('#phonenumbers').prepend('<li class="w3-bar"> <a href="tel:'+msg+'"><button class="w3-bar-item w3-button w3-black w3-round-large w3-right">Call</button></a> <div class="w3-bar-item"> <span class="w3-large">'+msg+'</span><br>               <span class="w3-tiny w3-text-grey"> </span> </div> </li>');
        });
      });
    </script>

  </body>
</html>
